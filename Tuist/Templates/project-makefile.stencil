# {{ name }} Project Makefile

.PHONY: feature generate clean help

# Find Tuist path
TUIST_PATH := $(shell command -v tuist 2>/dev/null || find /usr/local/bin /opt/homebrew/bin ~/.local/share/mise/installs/tuist/*/bin -name tuist 2>/dev/null | head -1)

# Create a new feature module
feature:
	@echo "ğŸš€ ìƒˆë¡œìš´ Featureë¥¼ ìƒì„±í•©ë‹ˆë‹¤..."
	@if [ -z "$(TUIST_PATH)" ]; then \
		echo "âŒ Tuistë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."; \
		echo "ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•´ì£¼ì„¸ìš”:"; \
		echo "curl -Ls https://install.tuist.io | bash"; \
		exit 1; \
	fi
	@read -p "Feature ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”: " name && \
	$(TUIST_PATH) scaffold feature --name $$name && \
	./Scripts/update-workspace.sh && \
	echo "âœ… Feature '$$name'ì´ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!" && \
	echo "ğŸ“¦ Workspace.swiftê°€ ìë™ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤!" && \
	echo "" && \
	echo "ë‹¤ìŒ ë‹¨ê³„:" && \
	echo "1. 'make generate'ë¡œ Xcode í”„ë¡œì íŠ¸ ì—…ë°ì´íŠ¸" && \
	echo "2. '$$name'FeatureDemo ìŠ¤í‚´ì„ ì„ íƒí•´ì„œ í…ŒìŠ¤íŠ¸"

# Generate Xcode project
generate:
	@echo "ğŸ“¦ Xcode í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•©ë‹ˆë‹¤..."
	@if [ -z "$(TUIST_PATH)" ]; then \
		echo "âŒ Tuistë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."; \
		echo "ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•´ì£¼ì„¸ìš”:"; \
		echo "curl -Ls https://install.tuist.io | bash"; \
		exit 1; \
	fi
	$(TUIST_PATH) generate

# Clean build artifacts
clean:
	@echo "ğŸ§¹ ì •ë¦¬ ì¤‘..."
	@if [ -z "$(TUIST_PATH)" ]; then \
		echo "âŒ Tuistë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."; \
		echo "ë‹¤ìŒ ëª…ë ¹ì–´ë¡œ ì„¤ì¹˜í•´ì£¼ì„¸ìš”:"; \
		echo "curl -Ls https://install.tuist.io | bash"; \
		exit 1; \
	fi
	$(TUIST_PATH) clean
	@echo "âœ… ì •ë¦¬ ì™„ë£Œ!"

# Show help
help:
	@echo "ì‚¬ìš© ê°€ëŠ¥í•œ ëª…ë ¹ì–´:"
	@echo "  make feature   - ìƒˆ Feature ëª¨ë“ˆ ìƒì„±"
	@echo "  make generate  - Xcode í”„ë¡œì íŠ¸ ìƒì„±/ì—…ë°ì´íŠ¸"
	@echo "  make clean     - ë¹Œë“œ ì•„í‹°íŒ©íŠ¸ ì •ë¦¬"
	@echo "  make help      - ì´ ë„ì›€ë§ í‘œì‹œ"